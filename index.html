<html>
  <link href="https://vjs.zencdn.net/7.4.1/video-js.css" rel="stylesheet" />
  <head>
    <title>Test for ConcertVast</title>
    <style>
      input {
        width: 100%;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <input
      name="vastUrl"
      value="https://ad.doubleclick.net/ddm/pfadx/N884.154386.EATER.COM/B21643693.231589573;sz=0x0;ord=[timestamp];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;dcmt=text/xml"
    />
    https://ad.doubleclick.net/ddm/pfadx/N3493.3018656VOX-CONCERT/B22204404.238409492;sz=0x0;ord=[timestamp];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;dcmt=text/xml;dc_vast=3
    <video class="video-js" controls width="900" height="480"></video>
  </body>
  <script src="https://vjs.zencdn.net/7.4.1/video.js"></script>
  <script>
    var playerObject = videojs(document.querySelector('.video-js'))
    var urlElement = document.querySelector('[name="vastUrl"]')
    var v = new ConcertVast()
    function loadVast(url) {
      v.loadRemoteVast(url).then(r => {
        console.log(v.asHLSUrl())
        console.log('bandiwdth:', v.bandwidth())

        var videoElement = document.querySelector('.video-js')

        var firstVideo = v.bestVideo({
          height: videoElement.clientHeight,
          width: videoElement.clientWidth,
        })
        console.log('videos', firstVideo.url(), firstVideo)

        playerObject.src([
          { type: firstVideo.mimeType(), src: firstVideo.url() },
        ])
      })
    }
    loadVast(urlElement.value)

    urlElement.addEventListener('blur', e => {
      loadVast(urlElement.value)
    })
  </script>
</html>
